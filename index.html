<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Love Proposal ‚ù§Ô∏è</title>

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family: 'Arial', sans-serif;
}

body{
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  text-align:center;
  overflow:hidden;
  transition:0.5s;
}

/* ================= THEMES ================= */

.theme-romantic{ background:linear-gradient(135deg,#ff758c,#ff7eb3); color:white; }
.theme-dark{ background:#111; color:#fff; }
.theme-night{ background:linear-gradient(135deg,#141e30,#243b55); color:white; }
.theme-soft{ background:#fcefee; color:#333; }
.theme-white{ background:#ffffff; color:#333; }

/* ================= CONTAINERS ================= */

.container{
  width:90%;
  max-width:400px;
}

/* ================= INPUTS ================= */

input, textarea, select{
  width:100%;
  padding:12px;
  margin:8px 0;
  border:none;
  border-radius:10px;
  font-size:16px;
}

/* ================= BIG HEART BUTTON ================= */

.heart-btn{
  font-size:60px;
  cursor:pointer;
  animation:beat 1s infinite;
  transition:0.3s;
}

@keyframes beat{
  0%{transform:scale(1);}
  50%{transform:scale(1.2);}
  100%{transform:scale(1);}
}

.heart-btn:hover{
  text-shadow:0 0 20px pink;
}

.heart-clicked{
  color:red;
  animation:none;
}

/* ================= YES / NO ================= */

.btn{
  padding:12px 20px;
  margin:10px;
  border:none;
  border-radius:20px;
  font-size:16px;
  cursor:pointer;
}

.yes{ background:#ff4d6d; color:white; }
.no{ background:#ccc; }

/* ================= FALLING HEARTS ================= */

.heart{
  position:fixed;
  top:-10px;
  font-size:20px;
  animation:fall 5s linear forwards;
}

@keyframes fall{
  to{
    transform:translateY(100vh);
    opacity:0;
  }
}

/* ================= SHARE BUTTONS ================= */

.share-btn{
  display:block;
  margin:10px 0;
  padding:10px;
  border-radius:10px;
  border:none;
  cursor:pointer;
}

.whatsapp{ background:#25D366; color:white; }
.copy{ background:#007bff; color:white; }
.reset{ background:#555; color:white; }

</style>
</head>
<body>

<div class="container" id="app"></div>

<script>

/* ===========================================
   CHECK IF THIS IS RECEIVER OR SENDER PAGE
=========================================== */

const params = new URLSearchParams(window.location.search);
const isReceiver = params.get("receiver");

/* ===========================================
   RECEIVER PAGE LOGIC
=========================================== */

if(isReceiver){

  const name = params.get("name");
  const message = params.get("message");
  const theme = params.get("theme");
  const music = params.get("music");

  document.body.className = theme;

  document.getElementById("app").innerHTML = `
    <h2>${name} has something for you ‚ù§Ô∏è</h2>
    <p style="margin:20px 0;">${message}</p>
    <button class="btn yes" onclick="acceptProposal('${music}')">YES üíñ</button>
    <button class="btn no" id="noBtn">NO</button>
    <audio id="musicPlayer" src="${music}.mp3"></audio>
  `;

  // Make NO button run away
  const noBtn = document.getElementById("noBtn");
  noBtn.addEventListener("mouseover",()=>{
    noBtn.style.position="absolute";
    noBtn.style.top=Math.random()*80+"%";
    noBtn.style.left=Math.random()*80+"%";
  });

}

/* ===========================================
   SENDER PAGE LOGIC
=========================================== */

else{

document.body.className="theme-romantic";

document.getElementById("app").innerHTML=`
  <h2>Create Your Proposal ‚ù§Ô∏è</h2>
  <input type="text" id="name" placeholder="Your Name">
  <textarea id="message" placeholder="Your Romantic Message"></textarea>

  <select id="theme">
    <option value="theme-romantic">Romantic</option>
    <option value="theme-dark">Dark</option>
    <option value="theme-night">Night</option>
    <option value="theme-soft">Soft</option>
    <option value="theme-white">White</option>
  </select>

  <select id="music">
    <option value="music1">Music 1</option>
    <option value="music2">Music 2</option>
    <option value="music3">Music 3</option>
    <option value="music4">Music 4</option>
    <option value="music5">Music 5</option>
  </select>

  <div class="heart-btn" onclick="generateLink(this)">‚ù§Ô∏è</div>

  <div id="shareSection"></div>
`;

}

/* ===========================================
   GENERATE SHAREABLE LINK
=========================================== */

function generateLink(btn){

  const name=document.getElementById("name").value;
  const message=document.getElementById("message").value;
  const theme=document.getElementById("theme").value;
  const music=document.getElementById("music").value;

  if(!name || !message){
    alert("Please enter name and message ‚ù§Ô∏è");
    return;
  }

  btn.classList.add("heart-clicked");

  const baseURL = window.location.origin + window.location.pathname;

  const finalURL = `${baseURL}?receiver=true&name=${encodeURIComponent(name)}&message=${encodeURIComponent(message)}&theme=${theme}&music=${music}`;

  document.getElementById("shareSection").innerHTML=`
    <button class="share-btn whatsapp" onclick="shareWhatsApp('${finalURL}')">Share on WhatsApp</button>
    <button class="share-btn copy" onclick="copyLink('${finalURL}')">Copy Link</button>
    <button class="share-btn reset" onclick="resetPage()">Create New</button>
  `;
}

/* ===========================================
   WHATSAPP SHARE
=========================================== */

function shareWhatsApp(url){
  const text = encodeURIComponent("‚ù§Ô∏è Someone has something special for you...\n\nOpen here:\n"+url);
  window.open(`https://wa.me/?text=${text}`,"_blank");
}

/* ===========================================
   COPY LINK
=========================================== */

function copyLink(url){
  navigator.clipboard.writeText(url);
  alert("Link Copied ‚ù§Ô∏è");
}

/* ===========================================
   RESET PAGE
=========================================== */

function resetPage(){
  window.location.href = window.location.origin + window.location.pathname;
}

/* ===========================================
   ACCEPT PROPOSAL (RECEIVER SIDE)
=========================================== */

function acceptProposal(music){

  document.getElementById("musicPlayer").play();

  // Start falling hearts
  setInterval(()=>{
    const heart=document.createElement("div");
    heart.className="heart";
    heart.innerHTML="‚ù§Ô∏è";
    heart.style.left=Math.random()*100+"vw";
    document.body.appendChild(heart);
    setTimeout(()=>heart.remove(),5000);
  },300);

  document.getElementById("app").innerHTML=`
    <h1>YAYYY üíñ</h1>
    <h2>Love Accepted ‚ù§Ô∏è</h2>
  `;
}

</script>
</body>
</html>













